-- INSTRUCCIÓN DDL RESTANTE
-- MODIFICACIÓN DE TABLAS: ALTER

ALTER TABLE NOMBRE_TABLA 
	LO QUE NECESITO MODIFICAR;

MODIFICACIONES PERMITIDAS SON:
	AGREGAR CAMPOS: ADD NOMBRE_CAMPO TIPO_DATO;
	BORRAR CAMPO: DROP COLUMN NOMBRE_CAMPO_A_BORRAR;
	MODIFICAR CAMPOS: MODIFY NOMBRE_CAMPO TIPO_DATO;
	AGREGAR RESTRICCIONES: ADD CONSTRAINT RESTRICCION_CORRESPONDIENTE;
	MODIFICAR RESTRICCIONES: MODIFY CONSTRAINT NOMBRE_RESTRICCION ENABLE/DISABLE;


-- AGREGAR EL CAMPO CIUDAD A LA TABLA CLIENTES COMO TIPO ALFANUMÉRICO DE 80 
-- CARACTERES CADA USUARIO DE APEX (CADA ESTUDIANTE), CON SUS RESPECTIVAS TABLAS.

CREATE TABLE CACB_CLIENTES(
	NRO_CLIENTE NUMBER,
	NOMBRE_CLIENTE VARCHAR2(50),
	APELLIDO1_CLIENTE VARCHAR2(30),
	APELLIDO2_CLIENTE VARCHAR2(30),
	DIRECCION_CLIENTE VARCHAR2(80),
	SALDO NUMBER,
	CREDITO NUMBER,
	DESCUENTO NUMBER,
	CONSTRAINT PK_CACB_CLIENTES PRIMARY KEY(NRO_CLIENTE)
);

ALTER TABLE CACB_CLIENTES 
	ADD CIUDAD_CLIENTE VARCHAR2(80);

-- REALIZAR DOS ACCIONES ASOCIADAS AL TRABAJO CON LA RESTRICCIÓN DE CLAVE PRIMARIA
-- DE LA TABLA CLIENTES, PRIMERO DESHABILITÁNDOLA Y LUEGO HABILITÁNDOLA.



--- EJEMPLO EN EL CASO DE HABER CREADO LA TABLA CLIENTES SIN CLAVE PRIMARIA
--- CON UN ALTER TABLE, PUEDE CARGARSE DICHA RESTRICCIÓN DESPUES


ALTER TABLE CACB_CLIENTES
	MODIFY CONSTRAINT PK_CACB_CLIENTES DISABLE;

ALTER TABLE CACB_CLIENTES
	MODIFY CONSTRAINT PK_CACB_CLIENTES ENABLE;

--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------

--Instrucciones DML: Lenguaje de Manipulación de Datos

-- 4 Instrucciones Básicas para trabajar: CRUD


C: Cargar
R: Leer
U: Actualizar
D: Borrar

--1 Insert: Almacenar Datos dentro de las Tablas

INSERT INTO NOMBRE_TABLA(ESCRITOS LOS NOMBRES DE LOS CAMPOS DE LA TABLA, SEPARADOS POR COMA) 
	VALUES(VALORES REALES CORRELATIVOS A LOS CAMPOS DESCRITO ANTERIORMENTE, SEPARADOS POR COMA);


--EJEMPLO: ASOCIADO A LA TABLA EDITORIALES DE LA BIBLIOTECA

INSERT INTO CACB_EDITORIALES(CODIGO_EDITORIAL, NOMBRE_EDITORIAL) 
	VALUES(1,'ALFAOMEGA');


-- ASÍ ES COMO SE VERÍA EN OTRO LENGUAJE DE PROGRAMACIÓN
-- CODIGO_EDITORIAL = 1;
-- NOMBRE_EDITORIAL = 'ALFAOMEGA'

-- COMPILAR NUEVAMENTE LA TABLA CLIENTES, SIN EL ATRIBUTO CIUDAD
-- LUGO, CARGAR 3 Registros de datos en la tabla CLIENTES
-- dados por la siguiente data:
-- 
-- 1, CARLOS, CASTRO, BUSTAMANTE, TALCA, 500, 5000, 20
-- 2, ALICIA, SANHUEZA, BRAVO, VILLA ALEGRE, 600, 2000, 40
-- 3, PEDRO, BRAVO, NUÑEZ, LINARES, 10000, 1000, 60


INSERT INTO CACB_CLIENTES(NRO_CLIENTE,NOMBRE_CLIENTE,APELLIDO1_CLIENTE,APELLIDO2_CLIENTE,DIRECCION_CLIENTE,SALDO,CREDITO,DESCUENTO)
	VALUES(1, 'CARLOS', 'CASTRO', 'BUSTAMANTE', 'TALCA', 500, 5000, 20);

INSERT INTO CACB_CLIENTES(NRO_CLIENTE,NOMBRE_CLIENTE,APELLIDO1_CLIENTE,APELLIDO2_CLIENTE,DIRECCION_CLIENTE,SALDO,CREDITO,DESCUENTO)
	VALUES(2, 'ALICIA', 'SANHUEZA', 'BRAVO', 'VILLA ALEGRE', 600, 2000, 40);

INSERT INTO CACB_CLIENTES(NRO_CLIENTE,NOMBRE_CLIENTE,APELLIDO1_CLIENTE,APELLIDO2_CLIENTE,DIRECCION_CLIENTE,SALDO,CREDITO,DESCUENTO)
	VALUES(3, 'PEDRO', 'BRAVO', 'NUÑEZ', 'LINARES', 10000, 1000, 60);


-- PARA REALIZAR INSERCIONES, ME DEBO PREOCUPAR DE 
-- QUE EN LA CLÁUSULA VALUES, LOS DATOS CONSIDERADOS, 
-- SEAN DEL TIPO DE DATO DECLARADO EN LA TABLA.


-- DEBO EVALUAR SI LOS DATOS QUE ESTOY INSERTANDO, 
-- ESTÁN O NO SUJETOS A RESTRICCIONES EN EL CASO DE 
-- PK, NO SE DEBEN REPETIR EN DISTINTOS INSERT. EN 
-- EL CASO FK, DEBO ASEGURARME QUE LOS DATOS EXISTAN
-- EN LA OTRA TABLA, PARA PODER ESTABLECER LA 
-- REFERENCIA.

-- EL ORDEN DE INSERCIÓN, ESTÁ DEFINIDO POR EL ORDEN DE CREACIÓN DEL
-- MODELO.


--2 Update: Modificar datos dentro de las tablas

UPDATE NOMBRE_TABLA SET 
	CAMPO_ACTUALIZAR1 = NUEVO_VALOR,
	CAMPO_ACTUALIZAR2 = NUEVO_VALOR,
	...,
	CAMPO_ACTUALIZARN = NUEVO_VALOR
	WHERE(CONDICION);


-- Quisiera cambiar el apellido2 de pedro por Soto

UPDATE CACB_CLIENTES SET
	APELLIDO2_CLIENTE = 'SOTO'
	WHERE(NRO_CLIENTE=3);


--3 Delete: Borrar datos dentro de las tablas.

DELETE FROM NOMBRE_TABLA; 
-- NO USAR ASÍ NUNCA =/

DELETE FROM NOMBRE_TABLA WHERE(CONDICION);
-- USAR ASÍ SIEMPRE =)


-- QUISIERA QUE BORREN TODOS AQUELLOS CLIENTES QUE TIENEN APELLIDO2 SOTO

DELETE FROM CACB_CLIENTES
	WHERE(APELLIDO2_CLIENTE='SOTO');


--4 Select: Consultar datos desde las tablas

CONSULTA BÁSICA, REQUIERE DE DOS CLÁUSULAS COMO MÍNIMO

SELECT QUÉ ES LO QUIERO MOSTRAR 
FROM DE DÓNDE LO VOY A SACAR;


QUÉ ES LO QUIERO MOSTRAR = CAMPOS A DESPLEGAR, SI SON MÁS DE UNO, SEPARADOS
							POR COMAS.

DE DÓNDE LO VOY A SACAR = TABLAS, DE DONDE VIENEN LOS DATOS INDICADOS Y SI SON
							MÁS DE UNA, ESTAS SEPARADAS POR COMA


SELECT CAMPOS SEPARADOS POR COMA
FROM DE DONDE LO VOY A SACAR, TABLA O TABLAS SEPARADO POR COMA
WHERE(CONDICION); -- ESTA ÚLTIMA ME PERMITE FILTRAR

-- EN LA CLÁUSULA SELECT, SI QUIERO MOSTRAR TODOS
-- LOS CAMPOS, PUEDO AGREGAR EN VEZ DE LO INDICADO
-- UN *

-- QUIERO QUE CONSULTEN TODOS LOS CAMPOS DE LA TABLA CLIENTES


SELECT *
FROM CACB_CLIENTES;


SELECT NRO_CLIENTE,NOMBRE_CLIENTE,APELLIDO1_CLIENTE,APELLIDO2_CLIENTE,DIRECCION_CLIENTE,SALDO,CREDITO,DESCUENTO
FROM CACB_CLIENTES;


-- QUISIERA UN REPORTE QUE MUESTRE LO SIGUIENTE REFERENTE A LOS CLIENTES: CODIGO, 
-- NOMBRE, APELLIDO1, DESCUENTO, SIEMPRE Y CUANDO ESTE SEA MAYOR 20%

SELECT NRO_CLIENTE, NOMBRE_CLIENTE, APELLIDO1_CLIENTE, APELLIDO2_CLIENTE
FROM CACB_CLIENTES
WHERE (DESCUENTO >20);


-- LUEGO DEL EJERICIO ANTERIOR BORRAR LA TABLA CLIENTES.

------------------------------ TAREA EN CLASE----------------------------------------
-- COMPILAR EL MODELO DE DATOS DE LA BIBLIOTECA, QUE YA ESTÁ HECHO, Y
-- ANTES DE IRNOS DEBEMOS ASEGURARNOS DE QUE EXISTAN A LO MENOS 5 REGISTROS POR 
-- TABLA.
-------------------INSERT AUTORES----------------------------------------

INSERT INTO CACB_AUTORES(COD_AUTOR,NOMBRE_AUTOR,APELLIDO1_AUTOR,APELLIDO2_AUTOR)
	VALUES(1,'CARLOS','CASTRO','BUSTAMANTE');

INSERT INTO CACB_AUTORES(COD_AUTOR,NOMBRE_AUTOR,APELLIDO1_AUTOR,APELLIDO2_AUTOR)
	VALUES(2,'HUGO','ARAYA','CARRASCO');

INSERT INTO CACB_AUTORES(COD_AUTOR,NOMBRE_AUTOR,APELLIDO1_AUTOR,APELLIDO2_AUTOR)
	VALUES(3,'FRANCISCO','VASQUEZ','IGLESIAS');

INSERT INTO CACB_AUTORES(COD_AUTOR,NOMBRE_AUTOR,APELLIDO1_AUTOR,APELLIDO2_AUTOR)
	VALUES(4,'MARCO','TORANZO','CESPEDES');

INSERT INTO CACB_AUTORES(COD_AUTOR,NOMBRE_AUTOR,APELLIDO1_AUTOR,APELLIDO2_AUTOR)
	VALUES(5,'LUIS','PONCE','ROSALES');

------------------INSERT EDITORIALES--------------------------------------

INSERT INTO CACB_EDITORIALES(COD_EDITORIAL,NOMBRE_EDITORIAL)
	VALUES(1,'ALFAOMEGA');

INSERT INTO CACB_EDITORIALES(COD_EDITORIAL,NOMBRE_EDITORIAL)
	VALUES(2,'ALMARA');

INSERT INTO CACB_EDITORIALES(COD_EDITORIAL,NOMBRE_EDITORIAL)
	VALUES(3,'MCGRAWHILL');

INSERT INTO CACB_EDITORIALES(COD_EDITORIAL,NOMBRE_EDITORIAL)
	VALUES(4,'UCM');

INSERT INTO CACB_EDITORIALES(COD_EDITORIAL,NOMBRE_EDITORIAL)
	VALUES(5,'UTALCA');

--------------INSERT LIBROS ----------------------------------------------

INSERT INTO CACB_LIBROS(COD_LIBRO, ISBN_LIBRO,TITULO_LIBRO,NRO_PAGINAS_LIBRO,COD_EDITORIAL)
	VALUES(1,12345678,'PYHTON FOR DUMMIES',300,2);

INSERT INTO CACB_LIBROS(COD_LIBRO, ISBN_LIBRO,TITULO_LIBRO,NRO_PAGINAS_LIBRO,COD_EDITORIAL)
	VALUES(2,23456789,'MATEMATICA PARA INGENIERIA',500,1);

INSERT INTO CACB_LIBROS(COD_LIBRO, ISBN_LIBRO,TITULO_LIBRO,NRO_PAGINAS_LIBRO,COD_EDITORIAL)
	VALUES(3,34567890,'MAGALLANES EL MEJOR EQUIPO',80,4);

INSERT INTO CACB_LIBROS(COD_LIBRO, ISBN_LIBRO,TITULO_LIBRO,NRO_PAGINAS_LIBRO,COD_EDITORIAL)
	VALUES(4,45678901,'BASE DE DATOS',800,3);

INSERT INTO CACB_LIBROS(COD_LIBRO, ISBN_LIBRO,TITULO_LIBRO,NRO_PAGINAS_LIBRO,COD_EDITORIAL)
	VALUES(5,56789012,'PROGRAMACION BASICA',180,5);

------- INSERT DETALLE LIBRO AUTOR ---------------------------------------

INSERT INTO CACB_DETALLE_LIBRO_AUTOR(COD_AUTOR,COD_LIBRO)
	VALUES(3,1);

INSERT INTO CACB_DETALLE_LIBRO_AUTOR(COD_AUTOR,COD_LIBRO)
	VALUES(3,4);

INSERT INTO CACB_DETALLE_LIBRO_AUTOR(COD_AUTOR,COD_LIBRO)
	VALUES(2,3);

INSERT INTO CACB_DETALLE_LIBRO_AUTOR(COD_AUTOR,COD_LIBRO)
	VALUES(1,3);


------------------------------ TAREA PARA LA CASA------------------------------------

--RESOLVER LAS SIGUIENTES CONSULTAS

--MOSTRAR TODOS LOS LIBROS SIEMPRE Y CUANDO LA EDITORIAL SEA SUPERIOR A 3
--MOSTRAR LOS PRESTAMOS QUE SE HAYAN REALIZADO ANTES DEL 17/06 
--(DEBE CONSIDERAR QUE UNA FECHA SE INSERTA IGUAL QUE UN VARCHAR PERO SIEGUIENDO
--LA SIGUIENTE LÓGICA: 'MM/DD/AAAA')
--MOSTRAR LOS PRESTAMOS QUE HAYAN ENTREGADO UN EJEMPLAR 3


------------------------------ PRÓXIMA CLASE-----------------------------------------
-- SÓLO REVISAREMOS TAREA Y RESPONDEREMOS CONSULTAS, CONSIDERANDO QUE LA SEMANA 
-- SUBSIGUIENTE ES LA EVALUACIÓN =)

